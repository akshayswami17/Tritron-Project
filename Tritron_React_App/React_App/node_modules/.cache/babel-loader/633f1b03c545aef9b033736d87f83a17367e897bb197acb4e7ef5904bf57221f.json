{"ast":null,"code":"import React,{useState,useEffect}from'react';import{useLocation,useNavigate}from'react-router-dom';import'bootstrap/dist/css/bootstrap.min.css';// Import Bootstrap CSS\nimport'../CSS Files/UpdateProfile.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function UpdateProfile(){const location=useLocation();const navigate=useNavigate();const userData=location.state;const[formData,setFormData]=useState({uid:'',// Add uid field here\nusername:'',password:'',first_name:'',last_name:'',phone_no:0,email:''// Add more fields as needed\n});useEffect(()=>{if(userData){setFormData({uid:userData.uid,// Populate uid from userData\nusername:userData.username,password:userData.password,first_name:userData.first_name,last_name:userData.last_name,phone_no:userData.phone_no,email:userData.email// Populate other fields as needed\n});}},[userData]);const handleChange=e=>{const{name,value}=e.target;setFormData({...formData,[name]:value});};const handleSubmit=async e=>{e.preventDefault();// Add validation logic here before submitting\ntry{const response=await fetch(`http://localhost:8080/updateUser/${formData.uid}`,{// Use formData.uid\nmethod:'PUT',headers:{'Content-Type':'application/json'},body:JSON.stringify(formData)});if(response.ok){alert(\"Profile updated successfully!\");navigate(\"/consumer_home\");// Redirect to the profile page or wherever needed\n}else{throw new Error(\"Failed to update profile\");}}catch(error){console.error(\"Error:\",error);alert(\"Error: \"+error.message);}};return/*#__PURE__*/_jsxs(\"div\",{className:\"updateprofile container\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"mb-4\",children:\"Update Profile\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"uid\",className:\"form-label\",children:\"User id: \"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"uid\",name:\"uid\",value:formData.uid,onChange:handleChange,className:\"form-control\",required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"username\",className:\"form-label\",children:\"Username: \"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"username\",name:\"username\",value:formData.username,onChange:handleChange,className:\"form-control\",required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"password\",className:\"form-label\",children:\"Password: \"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",id:\"password\",name:\"password\",value:formData.password,onChange:handleChange,className:\"form-control\",required:true})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn btn-primary\",children:\"Update\"})]})]});}export default UpdateProfile;","map":{"version":3,"names":["React","useState","useEffect","useLocation","useNavigate","jsx","_jsx","jsxs","_jsxs","UpdateProfile","location","navigate","userData","state","formData","setFormData","uid","username","password","first_name","last_name","phone_no","email","handleChange","e","name","value","target","handleSubmit","preventDefault","response","fetch","method","headers","body","JSON","stringify","ok","alert","Error","error","console","message","className","children","onSubmit","htmlFor","type","id","onChange","required"],"sources":["A:/Tritron Project/Tritron_React_App/React_App/src/components/UpdateProfile.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { useLocation, useNavigate } from 'react-router-dom';\r\nimport 'bootstrap/dist/css/bootstrap.min.css'; // Import Bootstrap CSS\r\nimport '../CSS Files/UpdateProfile.css';\r\n\r\nfunction UpdateProfile() {\r\n  const location = useLocation();\r\n  const navigate = useNavigate();\r\n  const userData = location.state;\r\n  \r\n  const [formData, setFormData] = useState({\r\n    uid: '', // Add uid field here\r\n    username: '',\r\n    password: '',\r\n    first_name: '',\r\n    last_name: '',\r\n    phone_no: 0,\r\n    email: '',\r\n    // Add more fields as needed\r\n  });\r\n\r\n  useEffect(() => {\r\n    if (userData) {\r\n      setFormData({\r\n        uid: userData.uid, // Populate uid from userData\r\n        username: userData.username,\r\n        password: userData.password,\r\n        first_name: userData.first_name,\r\n        last_name: userData.last_name,\r\n        phone_no: userData.phone_no,\r\n        email: userData.email,\r\n        // Populate other fields as needed\r\n      });\r\n    }\r\n  }, [userData]);\r\n\r\n  const handleChange = (e) => {\r\n    const { name, value } = e.target;\r\n    setFormData({\r\n      ...formData,\r\n      [name]: value\r\n    });\r\n  };\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    // Add validation logic here before submitting\r\n\r\n    try {\r\n      const response = await fetch(`http://localhost:8080/updateUser/${formData.uid}`, { // Use formData.uid\r\n        method: 'PUT',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify(formData)\r\n      });\r\n\r\n      if (response.ok) {\r\n        alert(\"Profile updated successfully!\");\r\n        navigate(\"/consumer_home\"); // Redirect to the profile page or wherever needed\r\n      } else {\r\n        throw new Error(\"Failed to update profile\");\r\n      }\r\n    } catch (error) {\r\n      console.error(\"Error:\", error);\r\n      alert(\"Error: \" + error.message);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className='updateprofile container'>\r\n      <h2 className=\"mb-4\">Update Profile</h2>\r\n      <form onSubmit={handleSubmit}>\r\n        <div className=\"mb-3\">\r\n          <label htmlFor=\"uid\" className=\"form-label\">User id: </label>\r\n          <input\r\n            type=\"text\"\r\n            id=\"uid\"\r\n            name=\"uid\"\r\n            value={formData.uid}\r\n            onChange={handleChange}\r\n            className=\"form-control\"\r\n            required\r\n          />\r\n        </div>\r\n        <div className=\"mb-3\">\r\n          <label htmlFor=\"username\" className=\"form-label\">Username: </label>\r\n          <input\r\n            type=\"text\"\r\n            id=\"username\"\r\n            name=\"username\"\r\n            value={formData.username}\r\n            onChange={handleChange}\r\n            className=\"form-control\"\r\n            required\r\n          />\r\n        </div>\r\n        <div className=\"mb-3\">\r\n          <label htmlFor=\"password\" className=\"form-label\">Password: </label>\r\n          <input\r\n            type=\"password\"\r\n            id=\"password\"\r\n            name=\"password\"\r\n            value={formData.password}\r\n            onChange={handleChange}\r\n            className=\"form-control\"\r\n            required\r\n          />\r\n        </div>\r\n        {/* <div className=\"mb-3\">\r\n          <label htmlFor=\"firstName\" className=\"form-label\">First Name: </label>\r\n          <input\r\n            type=\"text\"\r\n            id=\"firstName\"\r\n            name=\"first_name\"\r\n            value={formData.first_name}\r\n            onChange={handleChange}\r\n            className=\"form-control\"\r\n            required\r\n          />\r\n        </div>\r\n        <div className=\"mb-3\">\r\n          <label htmlFor=\"lastName\" className=\"form-label\">Last Name: </label>\r\n          <input\r\n            type=\"text\"\r\n            id=\"lastName\"\r\n            name=\"last_name\"\r\n            value={formData.last_name}\r\n            onChange={handleChange}\r\n            className=\"form-control\"\r\n            required\r\n          />\r\n        </div>\r\n        <div className=\"mb-3\">\r\n          <label htmlFor=\"phoneNo\" className=\"form-label\">Phone Number: </label>\r\n          <input\r\n            type=\"number\"\r\n            id=\"phoneNo\"\r\n            name=\"phone_no\"\r\n            value={formData.phone_no}\r\n            onChange={handleChange}\r\n            className=\"form-control\"\r\n            required\r\n          />\r\n        </div>\r\n        <div className=\"mb-3\">\r\n          <label htmlFor=\"email\" className=\"form-label\">Email: </label>\r\n          <input\r\n            type=\"email\"\r\n            id=\"email\"\r\n            name=\"email\"\r\n            value={formData.email}\r\n            onChange={handleChange}\r\n            className=\"form-control\"\r\n            required\r\n          />\r\n        </div> */}\r\n        {/* Add more fields as needed */}\r\n        <button type=\"submit\" className=\"btn btn-primary\">Update</button>\r\n      </form>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default UpdateProfile;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}